<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.livarter.app.mapper.CouponMapper">

    <select id="getCouponsByMemberId" resultType="com.livarter.app.dto.CouponResDto" >
        SELECT coupon_id AS id
             , image AS image
             , name AS name
        FROM coupon_member
        JOIN coupon
        ON coupon_member.coupon_id = coupon.id
        WHERE coupon_member.member_id = #{memberId}
    </select>

    <update id="removeCoupon">
        DELETE FROM coupon_member
        WHERE member_id = #{memberId}
          AND coupon_id = #{couponId}
    </update>

</mapper>